<!DOCTYPE html>
<html lang="zh-CN">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="2.Git-分支">




  <meta name="keywords" content="技术博客 前端 Node Python AI">










  <link rel="alternate" href="/atom.xml" title="深思阁">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.2">



<link rel="canonical" href="http://blog.go2sts.com/2019/01/25/Git-分支/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.2">



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "qhKGP5WaH1jdzfAxC8naEyh8-gzGzoHsz",
      appKey: "c1ffihM5AQSGtv4rwj3aaHeI"
    });
  </script>





<script>
  window.config = {"leancloud":{"app_id":"qhKGP5WaH1jdzfAxC8naEyh8-gzGzoHsz","app_key":"c1ffihM5AQSGtv4rwj3aaHeI"},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> 2.Git-分支 - 深思阁 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">深思阁</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">深思阁</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          2.Git-分支
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-01-25
        </span>
        
          <span class="post-category">
            
              <a href="/categories/配置管理/">配置管理</a>
            
          </span>
        
        
        <span class="post-visits" data-url="/2019/01/25/Git-分支/" data-title="2.Git-分支">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提交简介"><span class="toc-text">提交简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GIT中的提交"><span class="toc-text">GIT中的提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提交间关联"><span class="toc-text">提交间关联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#理解分支"><span class="toc-text">理解分支</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#分支"><span class="toc-text">分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#当前分支"><span class="toc-text">当前分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#远程分支"><span class="toc-text">远程分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分支操作"><span class="toc-text">分支操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建分支"><span class="toc-text">创建分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#切换分支"><span class="toc-text">切换分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在分支上提交"><span class="toc-text">在分支上提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建紧急修补Bug分支"><span class="toc-text">创建紧急修补Bug分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#合并分支"><span class="toc-text">合并分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除分支"><span class="toc-text">删除分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看分支和提交历史"><span class="toc-text">查看分支和提交历史</span></a></li></ol></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <p>摘要：文本是使用Git进行代码管理的第二篇文章，重点介绍：Git“必杀技”分支的原理、用途、用法以及指令，通过一个示例演示如何利用分支进行多版本管理。</p>
<a id="more"></a>
<p>回顾：上篇介绍了Git的一些基本概念和日常用法，包括Git的特点、工作区域和文件状态的概念；如何安装Git环境、配置用户信息；如何在本地创建版本库，使用<code>VS Code</code>操作版本库等。</p>
<p>你也许会有这种感觉，这跟之前使用的版本管理系统没有什么区别呀？而且，这个也解决不了快速迭代和并行开发的问题呀？那是因为，我们还没有使用Git“必杀技”分支。本文就讲讲分支的妙用。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>当创建一个版本库时，GIT默认创建一个名为<code>master</code>的分支，使用<code>git commit</code>命令提交到版本库中的版本信息作用在这个分支上。为什么会有默认<code>master</code>分支呢？这是因为GIT的版本控制依赖于分支。</p>
<p>以一张图可以清晰的了解分支以及分支和提交(版本)的关系（github中仓库的Insights/Network页面）</p>
<p><img src="/images/github-network.png" alt="github-network"></p>
<p>上图三条颜色的线代表三个分支，线上的圆点代表提交(版本)</p>
<p><code>master</code>默认分支。该分支有4次提交</p>
<p><code>beijing</code>分支。从<code>master</code>分支创建，该分支有3次提交</p>
<p><code>shanghai</code>分支。从<code>master</code>分支创建，该分支有3次提交</p>
<p>从上图可以看出</p>
<p><strong>分支相互独立</strong>。基于某一次提交(版本)可以创建多个分支，之后在不同分支上的提交不受其他分支的影响。</p>
<p><strong>分支是具名的</strong>。创建的分支名称是语义化的，默认<code>master</code>分支代表主分支，<code>beijing</code>和<code>shanghai</code>两个分支可以理解为在北京和上海的两个团队。当然，分支也可以按任务创建，如：<code>feature_login</code>、<code>fix_231</code>等，可根据团队的开发流程和习惯自行定义。</p>
<p><strong>提交依赖分支</strong>。每次提交操作都发生在某个分支上（<strong>没有分支的提交是危险的，会被GIT垃圾回收</strong>），因此在提交前需要确认当前的工作分支。</p>
<p>以上是对分支概念的简单介绍，在正式开始之前还需要对上文提到的“提交”和“分支”以及之间关系做进一步的解释，看看GIT是如何实现的，这将有助于对分支的深入理解。</p>
<h2 id="提交简介"><a href="#提交简介" class="headerlink" title="提交简介"></a>提交简介</h2><p>为了避免理解上的分歧，我们统称GIT中“版本”为“提交”英文名“commit”。也就是说，每次<code>git commit</code>都会在GIT版本库中创建一个新的版本，我们称这个“版本”为“提交”。我们通常说的V1.0、V2.1等版本，其实是在“提交”上打的标签而已。</p>
<p>下面以一个网页项目为例进行说明，其目录结构和文件如下所示，共有2个目录和4个文件组成</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test仓库中的文件结构</span></span><br><span class="line"><span class="comment"># tree命令查看结果</span></span><br><span class="line">├── images</span><br><span class="line">│   └── logo.png</span><br><span class="line">├── index.html</span><br><span class="line">├── readme</span><br><span class="line">└── styles</span><br><span class="line">    └── main.css</span><br></pre></td></tr></table></figure>
<h3 id="GIT中的提交"><a href="#GIT中的提交" class="headerlink" title="GIT中的提交"></a>GIT中的提交</h3><p>将工作目录中的全部文件通过<code>git commit</code>指令提交到<code>Git仓库</code>中，仓库创建的文件如下所示</p>
<p><img src="/images/blob-tree-commit.png" alt="blob-tree-commit"></p>
<p><strong><code>blob</code>文件</strong>，绿色，代表文件，与工作区一一对应</p>
<p><strong><code>tree</code>文件</strong>，黄色，代表目录，根目录和2个子目录</p>
<p><strong><code>commit</code>文件</strong>，青色，代表提交，管理文件和目录</p>
<p><strong>文件名是哈希值</strong>，所有的文件名为文件内容的<code>sha-1</code>值，长度40</p>
<p>通过这三类文件，Git对提交的版本进行管理。</p>
<h3 id="提交间关联"><a href="#提交间关联" class="headerlink" title="提交间关联"></a>提交间关联</h3><p>我们已经了解到提交是Git版本管理的基本单位，通过<code>commit文件</code>可以方便的读取指定版本的文件信息。下图中每个圆点代表一个提交，那每个提交间的关系Git是怎么管理的？</p>
<p><img src="/images/github-network.png" alt="github-network"></p>
<p>为了能够方便的遍历Git提交，在<code>commit文件</code>中使用<code>parent属性</code>保存上次<code>commit文件</code>的名称，这样就可以通过该属性向上(单向)遍历提交历史。可以快速回退到某个提交的版本</p>
<p>下图所示，共有三次提交，除第一次提交没有<code>parent属性</code>值外，后面两次提交的<code>parent属性</code>值指向前面的<code>commit文件</code></p>
<p><img src="/images/commits-and-parents.png" alt="提交关联"></p>
<p>注意：一个提交可能存在两个<code>parent</code>，当两个分支合并时，合并的提交文件中<code>parent属性</code>保存两个分支的<code>commit文件</code></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>通过上面的分析，我们可以掌握以下内容</p>
<p><strong>提交的分层管理</strong>。每个文件都一一对应仓库中的<code>blob文件</code>，每个目录对应仓库中的一个<code>tree文件</code>管理其目录下的文件和子目录，提交对应一个<code>commit文件</code>通过根<code>tree文件</code>管理全部文件和目录。</p>
<p><strong>提交间的关联</strong>。提交使用<code>commit文件</code>中的<code>parent属性</code>建立关联，这种关联是单向的(从后向前)，通过这种关联可以实现在不同提交(版本)间的快速切换。</p>
<h2 id="理解分支"><a href="#理解分支" class="headerlink" title="理解分支"></a>理解分支</h2><p>Git的每次提交都是在提交树上添加一个新节点，新节点中保存其父节点的名称。当一个父节点有多个子节点时就形成了分支。我们知道，每次提交都是在其父节点版本的基础进行的修改，基于同一父节点的不同分支都从父节点继承了全部信息，而之后的修改则是相互独立、互不干扰的，这就像多子女的家庭，虽然都是同一个父母，但每个子女都有自己独立的生活一样。</p>
<p>下图是Git中分支的示意图，图中每个方框都代表一个实体。青色代表提交、红色代表分支、黄色代表当前分支。红色框住的提交是<code>beijing</code>和<code>shanghai</code>两个分支的父节点。从图中可以看出，在<code>beijing</code>分支上的任何改动都不会影响<code>master</code>分支和<code>shanghai</code>分支。</p>
<p><img src="/images/branchs-detail.png" alt="分支详情"></p>
<h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><p><strong>分支是文件</strong>。在Git中分支是一个以文件形式存在的实体，文件内容为指向的提交文件名（40位哈希值）。由于分支采用语义化命名，相对于40位的哈希值更便于记忆和理解。</p>
<p><strong>分支是指针</strong>。我们可以把分支看成一个指向提交的指针，分支的这种设计使得在Git中操作分支非常的快速和轻便。</p>
<p><strong>分支是动态的</strong>。对于一个新建的空仓库，当第一次提交后，Git会默认创建一个名为<code>master</code>的分支指向该提交。之后在分支上做的提交操作，都会以分支当前指向的提交为父节点，创建新的提交节点。此时，分支的指针会移动并指向新的提交。简要的说就是：分支总是指向最后的提交，正常情况下总是向前移动。</p>
<h3 id="当前分支"><a href="#当前分支" class="headerlink" title="当前分支"></a>当前分支</h3><p>在Git仓库中创建多个分支时，如何确定我们工作的分支？Git使用<code>HEAD</code>表示当前分支。当前分支也是一个以文件形式存在的实体，在Git仓库中只有一个<code>HEAD</code>文件，其内容为当前工作的分支名称。</p>
<p>我们在Git仓库中进行的提交操作，都是对<code>HEAD</code>指向的分支进行的。因此，在工作时首先应该确认当前的工作分支，以免出现不必要的麻烦。</p>
<h3 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h3><p>即远程仓库上的分支，在Git中区分本地分支和远程分支。远程分支可以帮助我们直接操作远程仓库，可以拉取远程分支的提交到本地，也可以推送本地的分支到远程仓库。这部分内容在后面的章节进行介绍。</p>
<h2 id="分支操作"><a href="#分支操作" class="headerlink" title="分支操作"></a>分支操作</h2><p>下面介绍Git分支的常用操作，包括创建分支、切换分支、合并分支、删除分支。</p>
<p>假设在一个Git仓库的<code>master</code>分支下进行了3次提交，<code>master</code>分支指向最后一次提交(<code>1d9eb</code>)，当前分支为<code>master</code>分支，且仓库中不存在其他分支。</p>
<p><img src="/images/branchs-ops-init.png" alt="Git分支初始状态"></p>
<h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><p>假设，此时需要在项目中添加用户登录功能，我们可以创建一个新的分支，在这个分支上进行开发。</p>
<p><strong>使用指令</strong></p>
<p>在Git中创建分支非常的简单，使用<code>git branch</code>指令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支指令</span></span><br><span class="line">$ git branch [分支名称]</span><br><span class="line"><span class="comment"># 示例，需要增加新特性login</span></span><br><span class="line">$ git branch fea_login</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建并切换分支指令 合二为一</span></span><br><span class="line">$ git checkout -b [分支名称]</span><br></pre></td></tr></table></figure>
<p><strong>VS Code</strong></p>
<p><img src="/images/branchs-ops-new-vscode.png" alt="使用VSCode创建新分支"></p>
<p>从当前分支<code>master</code>创建一个新分支，新分支与<code>master</code>分支指向同一个提交。</p>
<p><img src="/images/branchs-ops-new.png" alt="创建新的分支"></p>
<h3 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h3><p>创建<code>fea_login</code>分支后，我们在该分支上进行登录功能的开发工作，工作前需要将当前分支切换到<code>fea_login</code></p>
<p><strong>使用指令</strong></p>
<p>在Git中切换分支使用<code>git checkout</code>指令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换分支指令</span></span><br><span class="line">$ git checkout [分支名称]</span><br><span class="line"><span class="comment"># 示例，切换到fea_login分支</span></span><br><span class="line">$ git checkout fea_login</span><br></pre></td></tr></table></figure>
<p><strong>VS Code</strong></p>
<blockquote>
<p> 使用VS Code 创建分支后，将自动切换到新的分支</p>
</blockquote>
<p><img src="/images/branchs-ops-switch-vscode.png" alt="VSCode切换分支"></p>
<p>切换分支后，当前分支<code>HEAD</code>指向<code>fea_login</code>，而且工作区的内容更换为<code>fea_login</code>指向提交的内容</p>
<p><img src="/images/branchs-ops-switch.png" alt="切换分支后"></p>
<p><strong>储藏变更</strong></p>
<p>如果在当前分支进行了编辑操作而没有提交到Git仓库时就进行分支切换操作，则Git会提示提交或储藏变更后再进行分支切换操作，以免丢失变更内容。</p>
<p>假设，我们在上例中的<code>fea_login</code>分支中对<code>readme.md</code>文件进行了修改，但并未提交到Git仓库中。这时，需要紧急修复一个Bug，我们需要马上切换到<code>master</code>分支。</p>
<p>在<code>VSCode</code>中切换到<code>master</code>分支时，给出了如下的提示，并阻止分支的切换操作。</p>
<p><img src="/images/branchs-ops-checkout-warn-vscode.png" alt="当前分支未提交变更时切换分支"></p>
<p>这时，我们有三种选择：</p>
<p><strong>储藏</strong>。将当前分支的变更临时储藏起来，等手头工作完成后，再将储藏的变更提取出来。<strong>推荐</strong></p>
<p><strong>提交</strong>。在当前分支将变更的文件提交到Git仓库中（即使当前的工作并没有完成），并做好提交注释。</p>
<p><strong>放弃</strong>。放弃在当前分支的所有变更，回退到最后一次提交的状态。<strong>不推荐</strong></p>
<p>下面主要介绍一下储藏变更以及将储藏的变更应用到当前分支的操作。</p>
<p><strong>储藏变更</strong></p>
<p><img src="/images/branchs-ops-stash-vscode.png" alt="储藏变更"></p>
<p><strong>提取储藏</strong></p>
<p><img src="/images/branchs-ops-usestash-vscode.png" alt="应用储藏"></p>
<p>提取储藏可以应用到不同的分支上（即不是只能应用在储藏的分支上），因此在操作时一定要注意当前的工作分支。</p>
<h3 id="在分支上提交"><a href="#在分支上提交" class="headerlink" title="在分支上提交"></a>在分支上提交</h3><p>我们在<code>fea_login</code>分支上创建<code>login.html</code>页面，开发完成后，将修改的内容提交到Git仓库中。</p>
<p><strong>使用指令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑login.html</span></span><br><span class="line">$ vi login.html</span><br><span class="line"><span class="comment"># 将login.html添加到暂存区中</span></span><br><span class="line">$ git add login.html</span><br><span class="line"><span class="comment"># 提交到Git仓库中</span></span><br><span class="line">$ git commit -m<span class="string">'添加login.html，增加用户登录功能'</span></span><br></pre></td></tr></table></figure>
<p><strong>VS Code</strong></p>
<p><img src="/images/branchs-ops-edit-vscode.png" alt="在分支上提交"></p>
<p>在<code>fea_login</code>分支上完成提交工作后，<code>fea_login</code>分支将指向新的提交。</p>
<p><img src="/images/branchs-ops-edit.png" alt="在分支上提交"></p>
<p>这时，如果将当前分支切换回<code>master</code>分支，则工作目录将恢复到<code>master</code>分支指向的提交<code>1d9eb</code>，也就是说在工作目录中将看不到新增加的文件<code>login.html</code>。</p>
<h3 id="创建紧急修补Bug分支"><a href="#创建紧急修补Bug分支" class="headerlink" title="创建紧急修补Bug分支"></a>创建紧急修补Bug分支</h3><p>假设，此时<code>master</code>分支上的版本（发布版本）有Bug需要紧急修复，则需要创建一个分支<code>fix_213</code>。具体的分支创建和Bug修复过程就不再赘述。</p>
<p>Bug修复完成并通过测试后，将代码提交到Git仓库中。此时，分支如下图所示</p>
<p><img src="/images/branchs-ops-two.png" alt="两个分支"></p>
<p><strong><code>master</code>分支</strong>。Git仓库的主干分支，该分支的版本与现场运行版本保持一致，处于<strong>稳定状态</strong>。</p>
<p><strong><code>fea_login</code>分支</strong>。基于<code>master</code>分支创建的特性分支，用于开发新的功能。</p>
<p><strong><code>fix_213</code>分支</strong>。基于<code>master</code>分支创建的Bug修复分支，用于修复发布版本的紧急Bug。</p>
<p><code>fea_login</code>分支和<code>fix_213</code>分支可以交由两人并行工作，或者交由一人通过切换分支来切换工作场景。不管哪种方式，都不需要开发人员还原曾经对<code>master</code>分支的修改，通过创建分支可以轻松实现。</p>
<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><p>创建分支的目的是为了方便的切换工作场景（修补Bug、重构代码、添加特性…）而不至于混淆代码，当完成了分支的特定工作后，就需要将分支合并到主分支，使得项目的版本持续向前演进。</p>
<p><strong>快进合并</strong></p>
<p>以合并<code>master</code>和<code>fix_213</code>分支为例，由于 <code>master</code> 分支所在的提交是<code>fix_213</code>分支所在提交的直接祖先，合并操作不会出现需要解决的冲突，因此Git只会简单的将指针向前推进（指针右移）—— 称为”快进(Fast-Forward)”。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 合并master和fix_213分支</span></span><br><span class="line"><span class="comment"># 先切换到合并进的分支master</span></span><br><span class="line">$ git checkout master</span><br><span class="line"><span class="comment"># 合并fix_213分支到master分支</span></span><br><span class="line">$ git merge fix_213</span><br></pre></td></tr></table></figure>
<p><code>VS Code</code>没有提供合并分支的图形化工具，可以使用命令模式进行合并。</p>
<p><img src="/images/branchs-ops-ffmerge-vscode.png" alt="使用VSCode进行合并分支"></p>
<p><strong>注意</strong>：合并操作时，先要切换到合并进的分支(本例为<code>master</code>)，再对要合并的分支执行合并操作。</p>
<p>将<code>fix_213</code>分支合并进<code>master</code>分支后，分支如下图所示</p>
<p><img src="/images/branchs-ops-ffmerge.png" alt="使用VSCode进行合并分支"></p>
<p><strong>三方合并</strong></p>
<p>以合并<code>master</code>和<code>fea_login</code>分支为例。和之前合并 <code>fix_213</code> 分支时不同，两个分支从某个历史提交分叉开来。由于<code>master</code> 分支所在提交并不是 <code>fea_login</code> 分支所在提交的直接祖先，此时Git 会使用两个分支所在提交（<code>80eb1</code> 和 <code>b83c0</code>）以及这两个分支的共同祖先（<code>1d9eb</code>），进行三方合并。</p>
<p><img src="/images/branchs-ops-threemerge.png" alt="三方合并"></p>
<p>三方合并时，Git将合并结果保存为一个新提交，称作<strong>合并提交</strong>，它的特别之处在于他有不止一个父提交。合并后的分支<code>master</code>指向这个<strong>合并提交</strong>。</p>
<p><img src="/images/branchs-ops-threemerge-ok.png" alt="三方合并后"></p>
<p><strong>合并冲突</strong></p>
<p>在进行<strong>三方合并</strong>时，可能存在这样的情况：两个分支对同一个文件的同一个部分进行了不同的修改，此时Git无法自动完成合并操作，需要人为参与解决冲突(修改冲突文件)。待冲突解决后，手动将修改后的最终文件提交到Git仓库，最终完成合并操作。</p>
<p>下面是一个合并冲突的示例。为了模拟冲突，我们在<code>master</code>分支和<code>fea_login</code>分支上又分别对<code>readme.md</code>文件进行了修改，都修改了第二行内容。然后分别将修改的内容提交到Git仓库。</p>
<p><img src="/images/branchs-ops-merge-conflict-vscode.png" alt="VSCode合并冲突处理"></p>
<h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><p>分支是为了特定的工作场景创建的，在创建的分支上完成编辑工作并<strong>合并到主分支</strong>后，该分支就完成了历史使命，最好删除该分支，以保持仓库分支的简洁。</p>
<p><strong>使用指令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除指定分支</span></span><br><span class="line">$ git branch -d [分支名称]</span><br><span class="line"><span class="comment"># 如果创建的分支未执行合并操作，则Git会提示不能删除，如果需要删除则</span></span><br><span class="line">$ git branch -D [分支名称]</span><br></pre></td></tr></table></figure>
<ul>
<li>当前分支不能删除</li>
<li>未合并的分支需要使用<code>-D</code>强行删除</li>
</ul>
<p><strong>VS Code</strong></p>
<p><img src="/images/branchs-ops-delete-vscode.png" alt="VSCode删除分支"></p>
<h3 id="查看分支和提交历史"><a href="#查看分支和提交历史" class="headerlink" title="查看分支和提交历史"></a>查看分支和提交历史</h3><p>有时我们需要查看本地Git仓库中的提交历史和分支情况，下面介绍常用的指令和方法</p>
<p><strong>使用指令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 查看Git仓库中的分支信息</span></span><br><span class="line"><span class="comment"># 只显示分支名称</span></span><br><span class="line">$ git branch</span><br><span class="line"><span class="comment"># 显示分支的提交名称和注释</span></span><br><span class="line">$ git branch -v</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看Git仓库中的提交历史</span></span><br><span class="line"><span class="comment"># 显示完整提交信息</span></span><br><span class="line">$ git <span class="built_in">log</span></span><br><span class="line"><span class="comment"># 显示提交注释和名称</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline</span><br><span class="line"><span class="comment"># 图形化显示提交历史和关系</span></span><br><span class="line">$ git <span class="built_in">log</span> --graph</span><br></pre></td></tr></table></figure>
<p><strong>VSCode</strong></p>
<p>建议安装<code>git history</code>插件，使用该插件可以在<code>VS Code</code>中以图形化方式查看分支和历史提交。</p>
<p><img src="/images/branchs-ops-gitlog-vscode.png" alt="VSCode中的git history"></p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="http://blog.go2sts.com">lleej</a>
    </p>
    <p class="copyright-item">
      <span>原文链接: </span>
      <a href="http://blog.go2sts.com/2019/01/25/Git-分支/">http://blog.go2sts.com/2019/01/25/Git-分支/</a>
    </p>
    <p class="copyright-item">
      <span>许可协议: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/GIT/">GIT</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2019/02/18/数据库-品悟性能优化/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">数据库-性能优化</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2018/12/12/Git-入门/">
        <span class="next-text nav-default">1.Git-入门</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:lleej@qq.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/lleej" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
  </div>



<div class="copyright">
  <span class="copyright-year">
    
    &copy; 
     
      2018 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">lleej</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.2"></script>

  </body>
</html>
